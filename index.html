<!DOCTYPE html>
<html lang="fr">
  <head>
    <!--Pour eviter le message d'erreur 'GEThttp://127.0.0.1:5500/favicon.ico
    qui s'affiche dans la console de Firefox-->
    <link rel="shortcut icon" href="#" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!--<link rel="stylesheet" href="style.css">-->
    <title>Document</title>
  </head>

  <body>
    <h1>PROTOTYPE DE PROGRAMME ORIENTE OBJET : PARC AUTO</h1>
    <strong>Ouvrez la console Web de votre navigateur</strong><br />
    <p>
    Nom du programme : parcAuto <br />
    L'application minimale envisagée ici comprendra la définition <br />
    de la classe ‘Métier' (Voiture) et un programme procédural de type console (parcAuto) <br />
    utilisant cette classe. <br />
    Comme on souhaite que la classe Métier reste indépendante de son usage par une <br />
    application particulière, elle n'effectue aucun affichage direct ; <br />
    les messages générés sont stockés dans un attribut accessible par le getter correspondant, <br />
    et c'est bien le programme principal qui saura les récupérer et les restituer à <br />
    l'utilisateur comme bon lui semble (ici, simples affichages séquentiels sur la console). <br />
    En cas d'erreur importante, la classe Métier pourra aussi lever une Exception <br />
    (gérée dans le programme principal).<br />
    <strong>Les intéractions avec l'utilisateur se feront dans la console et/ou des boites de <br /> 
    dialogue.</strong><br />
    Exemple d'image-écran :
    </p>
    <img src="./images/ecranParcAuto_1.JPG" /><br />
    <script src="./js/classVoiture.js"></script>
    <script type="text/javascript">
      let car1 = new Car("AA-229-CD", "bleu", 1576, 90, 45, 5);
      //Affichage console du message d'accueil en appelant le méthode welcome
      console.log(car1.welcome);

      //Affichage console de la fiche technique en appelant la méthode notice
      console.log(car1.notice);

      //Affichage prompt de demande d'assurance en tapant 1
      let choice = parseInt(0);

      //Boucle tant que le choix n'est pas 1
      while (choice != 1) {
        choice = prompt(`TAPEZ 1 pour prendre une assurance`);
        //Si 1 est rentré
        if (choice == 1) {
          //On défini l'assurance sur true via le Setter setInsurance
          car1.setInsurance = Boolean(true);
          /*on affiche dans la console un message de confirmation
                et on quitte la boucle*/
          console.log(car1.notice);

          /*si autre chose que 1 est rentré on affiche dans
                la console un message d'erreur*/
        } else {
          console.log(`ERREUR Merci de taper 1 et rien d'autre`);
        }
      }

      //Affichage console du tableau de bord en appelant la methode dashboard
      console.log(car1.dashboard);

      //Tant que le choix n'est pas 4 on reste dans la boucle
      while (choice != 4) {
        choice = prompt(`TAPEZ votre choix (1, 2, 3 ou 4)`);
        if (choice > 0 && choice <= 3) {
          switch (choice) {
            case "1":
            //Changement de la couleur du véhicule
              //on affiche un message sur la console
              console.log(`Vous sortez le pistolet à peinture`);

              //on récupère le message du Getter logColor
              console.log(car1.logColor);
              //et on demande de taper une nouvelle couleur
              let newColor = prompt("TAPEZ la couleur voulue");

              //on envoie la nouvelle couleur au Setter setColor
              car1.setColor = newColor;

              //si la nouvelle couleur est differente de celle en place
              if (newColor != this.color) {
                //on remplace l'ancienne par la nouvelle
                this.color = newColor;

                //et si on clique sur OK on affiche un message
                if (
                  confirm(`
                    Merci d'avoir changé la couleur du véhicule
                    Ce ${this.color} est magnifique!
                    OK pour retourner au tableau de bord
                    ANNULER pour rentrer le vehicule au garage`)
                ) {
                //on met à jour le tableau de bord dans la console
                  console.log(car1.dashboard);

                //sinon on recharge le test
                } else {
                  window.location.reload();
                }

                //sinon si la couleur est la même
              } else {

                //si on clique sur OK on affiche un message
                if (
                  confirm(`
                    Merci d'avoir rafraichi la couleur du véhicule!
                    OK pour retourner au tableau de bord
                    ANNULER pour rentrer le vehicule au garage`)
                ) {
                //et on met à jour le tableau de bord dans la console
                  console.log(car1.dashboard);

                //sinon on recharge le test
                } else {
                  window.location.reload();
                }
              }
              break;
            case "2":
            //Rajout d'essence dans le réservoir
              //on affiche un message dans la console
              console.log(`Vous remplissez le reservoir`);

              //on recuoere le message du Getter logFuel
              console.log(car1.logFuel);

              //on demande de taper la quantité de litres d'essence voulue
              let newFuel = 0;
              newFuel = prompt(`Tapez le nombre de litres d'essence désirés.`);

              //on affiche un message console
              console.log(`Vous demandez ${newFuel} litres`);

              //on defini la quantité d'ssence ajoutée via le Setter addFuel
              car1.addFuel = newFuel;

              //On récupère un message d'erreur par le Getter errorFuel
              console.log(car1.errorFuel);

              //puis on met a jour le tableau de bord sur la console
              console.log(car1.dashboard);
              break;
            case "3":
            //calculs de la consommation d'essence
              //on affiche un message sur la console
              console.log(`Vous préparez votre itinéraire`);

              //on demande de taper le nombre de km 
              let distance = prompt("Combien de Km voulez-vous parcourir?");

              //et on affiche un message console
              console.log(`Vous voulez faire ${distance} Km`);

              //on envoie la distance via le Setter distKm pour calculs
              car1.distKm = distance;

              //on demande de taper la vitesse désirée
              let speed = prompt("Entrez votre vitesse en Km/h");

              //et obn affiche un message console
              console.log(`En roulant en moyenne à ${speed} Km/h`);

              //on envoie la vitesse via le Setter speedKm pour calculs
              car1.speedKm = speed;

              //on defini la consommation d'essence 
              //et on affiche les messages consoles correspondants
              let consumption = "";
              if (speed < 50) {
                consumption = (distance / 100) * 10;
                console.log(`Vous allez consommer 10 litres aux 100km`);
              } else if (50 <= speed && speed <= 90) {
                consumption = (distance / 100) * 5;
                console.log(`Vous allez consommer 5 litres aux 100km`);
              } else if (91 <= speed && speed <= 130) {
                consumption = (distance / 100) * 8;
                console.log(`Vous allez consommer 8 litres aux 100km`);
              } else if (131 <= speed) {
                consumption = (distance / 100) * 12;
                console.log(`Vous allez consommer 12 litres aux 100km`);
              }

              //on envoie la consommation finale via le Setter consumKm pour traitement
              car1.consumKm = consumption;

              //on recupere le message du Getter move
              alert(car1.move);
              console.log(car1.dashboard);
              break;
          }
          //Sinon si le choix est 4 on sort de la boucle et on rentre au garage
        } else if (choice == 4) {
          console.log(`Vous rentrez au garage`);
          if (
            confirm(`
                OK pour terminer 
                ou ANNULER pour recommencer l'opération`)
          ) {
            // Message de remerciements de l'équipe
            text = `
                Merci d'avoir utilisé notre programme!
                La ligue du Code vous salue bien!
                Cliquez sur OK pour quitter`;
            alert(text);
          } else {
            // Code à éxécuter si l'utilisateur clique sur "Annuler"
            // Rechargement de la page
            window.location.reload();
          }
        }
      }
    </script>
  </body>
</html>
